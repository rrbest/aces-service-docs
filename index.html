
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
     <link href="images/ark-red-favicon.png" rel="icon" type="image/png" />
    <title>ACES Service API Docs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #303030;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/ark-red2.png" class="logo" alt="Ark red2" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
                <a href="#aces-service-api-docs" class="toc-h1 toc-link" data-title="Get Started">Get Started</a>
          </li>
          <li>
                <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
          </li>
          <li>
                <a href="#implementations" class="toc-h1 toc-link" data-title="Implementations">Implementations</a>
          </li>
          <li>
                <a href="#service-interfaces" class="toc-h1 toc-link" data-title="Service Interfaces">Service Interfaces</a>
          </li>
          <li>
                <a href="#instances" class="toc-h1 toc-link" data-title="Instances">Instances</a>
          </li>
          <li>
                <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
                <a href="#pagination" class="toc-h1 toc-link" data-title="Pagination">Pagination</a>
          </li>
          <li>
                <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#status-codes" class="toc-h2 toc-link" data-title="Status Codes">Status Codes</a>
                  </li>
                  <li>
                    <a href="#general-errors" class="toc-h2 toc-link" data-title="General Errors">General Errors</a>
                  </li>
                  <li>
                    <a href="#general-error-codes" class="toc-h2 toc-link" data-title="General Error Codes">General Error Codes</a>
                  </li>
                  <li>
                    <a href="#validation-errors" class="toc-h2 toc-link" data-title="Validation Errors">Validation Errors</a>
                  </li>
                  <li>
                    <a href="#field-error-codes" class="toc-h2 toc-link" data-title="Field Error Codes">Field Error Codes</a>
                  </li>
              </ul>
          </li>
          <li>
                <a href="#versions" class="toc-h1 toc-link" data-title="Versions">Versions</a>
          </li>
          <li>
                <a href="#api-reference" class="toc-h1 toc-link" data-title="API Reference">API Reference</a>
          </li>
          <li>
                <a href="#health" class="toc-h1 toc-link" data-title="Health">Health</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-health" class="toc-h2 toc-link" data-title="Get Health">Get Health</a>
                  </li>
              </ul>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='aces-service-api-docs'>ACES Service API Docs</h1>
<p>The ACES Service API Specification defines the API interface for ACES Services to
be listed on the Service Marketplace. 
<a href="https://github.com/ark-aces/aces-service-api#sdks">SDKs</a>
are available in Java, Go, PHP, JavaScript, Python, and C#.</p>

<p>The Service API provides a common way for to define blockchain interoperability services
and exposes them over a simple REST-ful API. The API allows service consumers to 
create Service contracts, pay for contracts, get results of contract executions.</p>

<p><img src="images/figures/service-nodes.png" alt="Service Nodes Figure" /></p>
<h1 id='overview'>Overview</h1>
<p>todo</p>
<h1 id='implementations'>Implementations</h1>
<p>The ACES Service API defines a standard protocol to facilitate creation and execution
of numerous blockchain interoperability services. As such, it is a
high level abstraction of many different service contract types that
needs to be implemented and hosted independently. Unlike many conventional business APIs
that host their own proprietary services on a single server, ACES Services are
designed to be distributed across many servers, where third-party service providers are 
able to develop, host, monetize, and maintain individual services.</p>

<p>The Service API specifies only the base necessary capabilities for implementing a
blockchain interoperability and contracts in a generic way that can support many
different use-cases for interoperability services, including those that may utilize 
multiple different blockchains or interface with physical hardware.</p>

<p>All implementations conforming to the ACES Service API specification can be 
consumed using the common client libraries and processing logic, 
allowing different services to easily plugged into applications or list on the
Service Marketplace.</p>
<h1 id='service-interfaces'>Service Interfaces</h1>
<p>todo: explain service interfaces</p>
<h1 id='instances'>Instances</h1>
<p>Instances run on any web server and can be made private or public. Multiple instances may
also run on a single web server using different HTTP ports. </p>

<p>We don&#39;t make any guarantees on how instances are managed, so consumers will need to host
their own instances, subscribe to only trusted providers, or subscribe to multiple instances to
ensure they can access services in the case a provider goes down.</p>

<p>The upcoming ACES Service Marketplace will add a layer of trust and stability to Services
by verifying service providers and enabling fallbacks in case a provider goes down.</p>
<h1 id='authentication'>Authentication</h1>
<p>The ACES Service API does not define any authentication method at this time.
To secure services, they must be placed behind a reverse proxy that performs
basic authentication or other such authorization before allowing requests to
the back-end service.</p>
<h1 id='pagination'>Pagination</h1><pre class="highlight shell tab-shell"><code><span class="nv">url</span><span class="o">=</span><span class="s2">"http://localhost/contracts/3985723987423/executions"</span>
<span class="nv">url</span><span class="o">=</span><span class="s2">"</span><span class="nv">$url</span><span class="s2">?pageSize=100"</span>
<span class="nv">url</span><span class="o">=</span><span class="s2">"</span><span class="nv">$url</span><span class="s2">&amp;page=4"</span>
<span class="nv">url</span><span class="o">=</span><span class="s2">"</span><span class="nv">$url</span><span class="s2">&amp;continuation=839729837520395702375023"</span>
curl -X GET <span class="s2">"</span><span class="nv">$url</span><span class="s2">"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="n">ServiceClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServiceClient</span><span class="o">(</span><span class="s">"http://localhost"</span><span class="o">);</span>

<span class="n">ContractExecutionsRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContractExecutionsRequest</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">setPageSize</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setPage</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setContinuation</span><span class="o">(</span><span class="s">"933502938509238509283059"</span><span class="o">);</span>

<span class="n">Page</span><span class="o">&lt;</span><span class="n">ContractExecution</span><span class="o">&gt;</span> <span class="n">executionsPage</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getContractExecutionsPage</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"pageSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"933502938509238509283059"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"executed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"executedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-01T00:00:00.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A <code>GET</code> request that returns a list of unbound items will be paginated
in a way to return only a small number of items per page.</p>

<p>Clients can request additional pages by performing additional <code>GET</code>
requests to retrieve the next page.</p>

<p>Page number is zero-offset such that the first page has <code>page = 0</code>.</p>

<p>The page response contains a <code>continuation</code> property that can be added
to <code>GET</code> requests for the next page to stabilize pagination offsets.
Including the continuation parameter ensures that newly added items
will not shift down items in the next page. This allows pages to be
iterated over without encountering repeat elements as elements are
added.</p>
<h1 id='errors'>Errors</h1>
<p>ACES Service API instances can return a set of standard HTTP errors classified by
the response HTTP Status code.</p>

<p>An request body validation error returns a <code>400</code> HTTP Status Code and an error response body
with a detailed description of field validation errors. Consumers should correct the request
before resubmitting the request.</p>

<p>Any <code>5xx</code> level errors can be retried without making changes to the request since they
are returned when there is something wrong with the server and not the consumer&#39;s request.</p>
<h3 id='status-codes'>Status Codes</h3>
<p>ACES Service API instances return errors responses with the following HTTP Status codes:</p>

<table><thead>
<tr>
<th>HTTP Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>The request was invalid. The consumer should read error messages and correct the request body before resending request.</td>
</tr>
<tr>
<td>404</td>
<td>The requested resource was not found.</td>
</tr>
<tr>
<td>405</td>
<td>The URL in the request does not support the requested HTTP method.</td>
</tr>
<tr>
<td>429</td>
<td>Too many requests have been sent over a given time frame and the server has limited the consumer.</td>
</tr>
<tr>
<td>500</td>
<td>The server had an unexpected error. Consumers should try the request again later.</td>
</tr>
<tr>
<td>503</td>
<td>The server is running, but not currently accepting traffic. Consumers should try the request again later.</td>
</tr>
</tbody></table>
<h3 id='general-errors'>General Errors</h3>
<blockquote>
<p>Example error response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'http://localhost/contracts/123456/cancels'</span> <span class="se">\</span>
  -X POST 
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alreadyCancelled"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Contract has already been cancelled."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Errors always return an error code and human readable error message.
Consumers should handle any expected errors for an API call using the 
error <code>code</code> value.</p>
<h3 id='general-error-codes'>General Error Codes</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>notFound</td>
<td>The requested resource was not found.</td>
</tr>
<tr>
<td>invalidRequest</td>
<td>The request body is invalid. See <code>Validation Errors</code> below.</td>
</tr>
</tbody></table>
<h3 id='validation-errors'>Validation Errors</h3>
<blockquote>
<p>Example error response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'http://localhost/contracts'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
     "arkAddress": "not-an-addresss"
   }'</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalidRequest"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request is invalid."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fieldErrors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arkAddress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalidArkAddress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Ark address given is invalid."</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arkAmount"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ark amount is required."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Validation errors have http status code = <code>400</code> and a response body error code = <code>invalidRequest</code>.
Any field validation errors are returned in the <code>fieldErrors</code> list and include the field name corresponding
to the request parameter, validation error code, and human-readable message for the field error.</p>
<h3 id='field-error-codes'>Field Error Codes</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>required</td>
<td>The field value is required.</td>
</tr>
<tr>
<td>invalidUrl</td>
<td>The given URL value is invalid.</td>
</tr>
<tr>
<td>tooShort</td>
<td>The field value given is too short.</td>
</tr>
<tr>
<td>tooLong</td>
<td>The field value given is too long.</td>
</tr>
</tbody></table>
<h1 id='versions'>Versions</h1>
<p>Services instances can upgrade to new backwards compatible versions without
breaking client integrations. ACES defines backwards compatible changes as any of the following:</p>

<ul>
<li>Adding new API endpoints</li>
<li>Adding new optional request parameters</li>
<li>Adding new response properties</li>
<li>Changing length or format of String properties</li>
</ul>

<p>If breaking changes to the Service must be made, the provider needs to launch a new
version in parallel at a different URL and have clients re-subscribe to the new version URL. </p>
<h1 id='api-reference'>API Reference</h1><h1 id='health'>Health</h1><h2 id='get-health'>Get Health</h2>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
